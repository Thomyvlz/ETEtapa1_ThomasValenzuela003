CREATE TABLE CLIENTE 
(
  ID_CLIENTE NUMBER(11, 0) NOT NULL 
, RUT NVARCHAR2(10) NOT NULL 
, FIRST_NAME NVARCHAR2(30) NOT NULL 
, LAST_NAME NVARCHAR2(30) NOT NULL 
, EMAIL VARCHAR2(50 BYTE) NOT NULL 
, TELEFONO NVARCHAR2(12) NOT NULL 
, FECHA_NACIMIENTO DATE NOT NULL 
, DIRECCION VARCHAR2(50 BYTE) NOT NULL 
, REGION NVARCHAR2(255) NOT NULL 
, COMUNA NVARCHAR2(255) NOT NULL 
, CONSTRAINT CLIENTE_PK PRIMARY KEY 
  (
    ID_CLIENTE 
  )
  USING INDEX 
  (
      CREATE UNIQUE INDEX CLIENTE_PK ON CLIENTE (ID_CLIENTE ASC) 
      LOGGING 
      TABLESPACE USERS 
      PCTFREE 10 
      INITRANS 2 
      STORAGE 
      ( 
        INITIAL 65536 
        NEXT 1048576 
        MINEXTENTS 1 
        MAXEXTENTS UNLIMITED 
        BUFFER_POOL DEFAULT 
      ) 
      NOPARALLEL 
  )
  ENABLE 
) 
LOGGING 
TABLESPACE USERS 
PCTFREE 10 
INITRANS 1 
STORAGE 
( 
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1 
  MAXEXTENTS UNLIMITED 
  BUFFER_POOL DEFAULT 
) 
NOCOMPRESS 
NO INMEMORY 
NOPARALLEL;

ALTER TABLE CLIENTE
ADD CONSTRAINT CLIENTE_EMAIL_UN UNIQUE 
(
  EMAIL 
)
USING INDEX 
(
    CREATE UNIQUE INDEX CLIENTE_EMAIL_UN ON CLIENTE (EMAIL ASC) 
    LOGGING 
    TABLESPACE USERS 
    PCTFREE 10 
    INITRANS 2 
    STORAGE 
    ( 
      INITIAL 65536 
      NEXT 1048576 
      MINEXTENTS 1 
      MAXEXTENTS UNLIMITED 
      BUFFER_POOL DEFAULT 
    ) 
    NOPARALLEL 
)
 ENABLE;

ALTER TABLE CLIENTE
ADD CONSTRAINT CLIENTE_RUT_UN UNIQUE 
(
  RUT 
)
USING INDEX 
(
    CREATE UNIQUE INDEX CLIENTE_RUT_UN ON CLIENTE (RUT ASC) 
    LOGGING 
    TABLESPACE USERS 
    PCTFREE 10 
    INITRANS 2 
    STORAGE 
    ( 
      INITIAL 65536 
      NEXT 1048576 
      MINEXTENTS 1 
      MAXEXTENTS UNLIMITED 
      BUFFER_POOL DEFAULT 
    ) 
    NOPARALLEL 
)
 ENABLE;

create or replace NONEDITIONABLE TRIGGER cliente_id_cliente_trg BEFORE
    INSERT ON cliente
    FOR EACH ROW
    WHEN ( new.id_cliente IS NULL )
BEGIN
    :new.id_cliente := cliente_id_cliente_seq.nextval;
END;
